<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>数据可视化</title>
  <link rel="stylesheet" href="css/index.css" type="text/css" />

</head>

<body>
  <!-- 头部的盒子 -->
  <header>

    <div class="index_nav">
      <ul style=" margin-bottom: 0px;">
        <li class="l_left total_chose_fr nav_active">航班</li>
        <li class="l_left total_chose_pl">公路</li>
      </ul>

      <!-- <div class="total_chose_box" style="display: none;"></div> -->
      <!-- <div class="clear"></div> -->
      <h1>数据可视化-ECharts</h1>
      <div class="showTime"></div>
      <script>
        var t = null;
        t = setTimeout(time, 1000); //開始运行
        function time() {
          clearTimeout(t); //清除定时器
          dt = new Date();
          var y = dt.getFullYear();
          var mt = dt.getMonth() + 1;
          var day = dt.getDate();
          var h = dt.getHours(); //获取时
          var m = dt.getMinutes(); //获取分
          var s = dt.getSeconds(); //获取秒
          document.querySelector(".showTime").innerHTML =
            "当前时间：" +
            y +
            "年" +
            mt +
            "月" +
            day +
            "-" +
            h +
            "时" +
            m +
            "分" +
            s +
            "秒";
          t = setTimeout(time, 1000); //设定定时器，循环运行
        }
      </script>
    </div>




  </header>

  <!-- 页面主体部分 -->
  <div class="index_tabs">
    <!-- 飞机航线 -->
    <div class="inner">
      <div class="mainbox">
        <div class="column">
          <div class="panel bar">
            <h2>区间统计（2022.03.01~2022.05.28）</h2>
            <div class="chart"></div>
            <div class="panel-footer"></div>
          </div>
          <div class="panel line">
            <h2>
              同期上海民航执行量对比（03.01~05.28）
            </h2>
            <div class="chart"></div>
            <div class="panel-footer"></div>
          </div>
          <div class="panel line2">
            <h2>区间内上海民航执行、取消情况分析</h2>
            <div class="chart"></div>
            <div class="panel-footer"></div>
          </div>
        </div>
        <div class="column">
          <!-- no模块制作 -->
          <div class="no">
            <div class="no-time">2022.05.25~2022.05.28上海民航飞行情况</div>
            <div class="no-hd">
              <ul>
                <li>3300</li>
                <li>55</li>
                <li>3245</li>
                <li>5</li>
              </ul>
            </div>
            <div class="no-bd">
              <ul>
                <li>计划</li>
                <li>已执行</li>
                <li>取消</li>
                <li>延误</li>
              </ul>
            </div>
          </div>
          <!-- 地图模块 -->
          <div class="map">
            <div class="map1"></div>
            <div class="map2"></div>
            <div class="map3"></div>
            <div class="chart"></div>
          </div>
        </div>
        <div class="column">
          <div class="panel1 bar2">
            <h2>上海到各省市已执行民航情况分析</h2>
            <input type="button" onclick="drawModel(1)" value="5.25" style="background-color:rgba(255, 255, 255, 0.03); text-transform: uppercase;
            border:1px solid rgba(25, 186, 139, 0.17);
            border-top: 2px solid #02a6b5;
            border-left: 2px solid #02a6b5;
            width: 70px;
            margin-top: 0; 
            margin-left: 12px;
            text-align: center;
            font-size: 18px; 
            color: #FFFFFF;
            line-height: 30px;
            cursor: pointer;
            transition:0.2s;"></input>
            <input type="button" onclick="drawModel(2)" value="5.26" style="background-color:rgba(255, 255, 255, 0.03); text-transform: uppercase;
            border:1px solid rgba(25, 186, 139, 0.17);
            border-top: 2px solid #02a6b5;
            border-left: 2px solid #02a6b5;
            width: 70px;
            margin-top: 0; 
            margin-left: 12px;
            text-align: center;
            font-size: 18px; 
            color: #FFFFFF;
            line-height: 30px;
            cursor: pointer;
            transition:0.2s;"></input>
            <input type="button" onclick="drawModel(3)" value="5.27" style="background-color:rgba(255, 255, 255, 0.03); text-transform: uppercase;
            border:1px solid rgba(25, 186, 139, 0.17);
            border-top: 2px solid #02a6b5;
            border-left: 2px solid #02a6b5;
            width: 70px;
            margin-top: 0; 
            margin-left: 12px;
            text-align: center;
            font-size: 18px; 
            color: #FFFFFF;
            line-height: 30px;
            cursor: pointer;
            transition:0.2s;"></input>
            <input type="button" onclick="drawModel(4)" value="5.28" style="background-color:rgba(255, 255, 255, 0.03); text-transform: uppercase;
            border:1px solid rgba(25, 186, 139, 0.17);
            border-top: 2px solid #02a6b5;
            border-left: 2px solid #02a6b5;
            width: 70px;
            margin-top: 0; 
            margin-left: 12px;
            text-align: center;
            font-size: 18px; 
            color: #FFFFFF;
            line-height: 30px;
            cursor: pointer;
            transition:0.2s;"></input>
            <div class="chart"></div>
            <div class="panel1-footer"></div>
          </div>
          <div class="panel pie2">
            <h2>地区分布（2022.05.25~2.22.05.28）</h2>
            <div class="chart">图表</div>
            <div class="panel-footer"></div>
          </div>
        </div>
        <div class="cleardix"></div>
      </div>
      <script src="js/flexible.js"></script>
      <script src="js/echarts.min.js"></script>
      <!-- 先引入jquery -->
      <script src="js/jquery.js"></script>
      <!-- 必须先引入china.js 这个文件 因为中国地图需要 -->
      <script src="js/china.js"></script>
      <script src="js/index.js"></script>
    </div>



    <!-- 公路 -->
    <div class="inner" style="display: none">
      <div class="mainbox2">
          <div class="panel2">
            <div id="box" style="width: 16.55rem;height: 12.4rem; z-index: 5;"></div>

            <script src="js/echarts.min.js" type="text/javascript" charset="utf-8"></script>
            <script src="js/bmap.min.js" type="text/javascript" charset="utf-8"></script>
            <script src="js/jquery.js"></script>

            <!-- 使用的是2.0版本的地图数据 -->
            <script src="http://api.map.baidu.com/api?v=3.0&ak=UAumsTfvpKBlNPUd9e5PvAEnR0YGNllO" type="text/javascript"
              charset="utf-8"></script>
            <script type="text/javascript">
              //  const searchList = ["770路","771路","774路","775路","776路","778路","779路","780路","781路","783路","784路","784路区间","785路","787路","789路","790路","791路","793路B线","793路","794路","795路","798路","799路","801路","802路","804路","806路","807路","808路","809路","810路","812路","813路","816路","817路","818路","819路","822路","823路","824路","825路","829路","830路","836路","837路","842路","843路","844路","845路","848路","849路","850路","851路","854路","855路","856路","858路","860路","862路","863路","864路","868路","869路","870路","871路","875路","876路","909路"];
              //  上海市暂时添加这几个公交线路数据 后期再补
              const myChart = echarts.init(document.getElementById('box'));

              $.get('lines-bus.json', function (data) {
                console.log(data)
                var busLines = [].concat.apply([], data.map(function (busLine, idx) {
                  let hStep = 300 / (data.length - 1);
                  let prevPt = [];
                  let points = [];
                  for (let i = 0; i < busLine.length; i++) {
                    let pt = [];
                    // console.log(busLine)
                    pt.push(busLine[i].lng, busLine[i].lat);
                    points.push([pt[0], pt[1]]);
                  }
                  return {
                    coords: points,
                    lineStyle: {
                      normal: {
                        color: echarts.color.modifyHSL('#5A94DF', Math.round(hStep * idx))
                      }
                    }
                  };
                }))

                myChart.setOption((
                  option = {
                    bmap: {
                      center: [121.294687, 31.37637],
                      zoom: 12,
                      roam: true,
                      mapStyle: {
                        'styleJson': [
                          {
                            'featureType': 'water',
                            'elementType': 'all',
                            'stylers': {
                              'color': '#031628'
                            }
                          },
                          {
                            'featureType': 'land',
                            'elementType': 'geometry',
                            'stylers': {
                              'color': '#000102'
                            }
                          },
                          {
                            'featureType': 'highway',
                            'elementType': 'all',
                            'stylers': {
                              'visibility': 'off'
                            }
                          },
                          {
                            'featureType': 'arterial',
                            'elementType': 'geometry.fill',
                            'stylers': {
                              'color': '#000000'
                            }
                          },
                          {
                            'featureType': 'arterial',
                            'elementType': 'geometry.stroke',
                            'stylers': {
                              'color': '#0b3d51'
                            }
                          },
                          {
                            'featureType': 'local',
                            'elementType': 'geometry',
                            'stylers': {
                              'color': '#000000'
                            }
                          },
                          {
                            'featureType': 'railway',
                            'elementType': 'geometry.fill',
                            'stylers': {
                              'color': '#000000'
                            }
                          },
                          {
                            'featureType': 'railway',
                            'elementType': 'geometry.stroke',
                            'stylers': {
                              'color': '#08304b'
                            }
                          },
                          {
                            'featureType': 'subway',
                            'elementType': 'geometry',
                            'stylers': {
                              // 'color': '#000000',// 默认透明显示地铁线路
                              'lightness': -70
                            }
                          },
                          {
                            'featureType': 'building',
                            'elementType': 'geometry.fill',
                            'stylers': {
                              'color': '#000000'
                            }
                          },
                          {
                            'featureType': 'all',
                            'elementType': 'labels.text.fill',
                            'stylers': {
                              'color': '#857f7f'
                            }
                          },
                          {
                            'featureType': 'all',
                            'elementType': 'labels.text.stroke',
                            'stylers': {
                              'color': '#000000'
                            }
                          },
                          {
                            'featureType': 'building',
                            'elementType': 'geometry',
                            'stylers': {
                              'color': '#022338'
                            }
                          },
                          {
                            'featureType': 'green',
                            'elementType': 'geometry',
                            'stylers': {
                              'color': '#062032'
                            }
                          },
                          {
                            'featureType': 'boundary',
                            'elementType': 'all',
                            'stylers': {
                              'color': '#465b6c'
                            }
                          },
                          {
                            'featureType': 'manmade',
                            'elementType': 'all',
                            'stylers': {
                              'color': '#022338'
                            }
                          },
                          {
                            'featureType': 'label',
                            'elementType': 'all',
                            'stylers': {
                              'visibility': 'off'
                            }
                          }
                        ]
                      }
                    },
                    series: [
                      // 线的效果
                      {
                        type: 'lines',
                        coordinateSystem: 'bmap',
                        polyline: true,
                        data: busLines,
                        silent: true,
                        lineStyle: {
                          normal: {
                            //  color: '#fff',
                            // color: 'rgb(200, 35, 45)',
                            opacity: 0.75,
                            width: 2.3
                          }
                        },
                        progressiveThreshold: 500,
                        progressive: 200
                      },
                      // 动态效果
                      {
                        type: 'lines',
                        coordinateSystem: 'bmap',
                        polyline: true,
                        data: busLines,
                        lineStyle: {
                          normal: {
                            width: 0
                          }
                        },
                        effect: {
                          constantSpeed: 50,
                          show: true,
                          trailLength: 0.8,
                          symbolSize: 4
                        },
                        zlevel: 1
                      }
                    ]
                  }
                ));
              })
            </script>
            <div class="panel2-footer"></div>
            <div class="cleardix"></div>
          </div>
          <div class="column">
            <div class="panel4 bar3" style="background:url(/images/wordcloud.jpg);background-repeat: no-repeat;background-size:contain;position: relative;">
              <h2>各公交途径站词云</h2>
              <!-- <img src="/images/wordcloud.jpg" style="width: 490px ;margin: 30px 0;"> -->
              <div class="chart"></div>
              <div class="panel4-footer"></div>
            </div>
            <div class="panel3 tree1"> 
              <h2>
                各机场航站楼始发公交树图
              </h2>
              <div class="chart"></div>
              <div class="panel3-footer"></div>
            </div>
          </div>
          
      </div>
    </div>



    

</body>

</html>